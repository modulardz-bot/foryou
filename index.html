<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Memories - D</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #e0e0e0;
      font-family: monospace;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .shooting-star {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      top: 0;
      left: 0;
      box-shadow:
        0 0 8px #fff,
        0 0 15px #a29bfe,
        0 0 25px #fd79a8,
        -5px -5px 15px rgba(255,255,255,0.3); /* jejak */
      animation: shoot 1.5s ease-out forwards;
      opacity: 0.95;
      z-index: 1;
    }

    @keyframes shoot {
      0% {
       transform: translate(0, 0) scale(1);
       opacity: 1;
      }
      100% {
       transform: translate(600px, 400px) scale(0.9);
       opacity: 0;
      }
    }

    .stars {
      position: fixed;
      width: 100%;
      height: 100%;
      background: transparent;
      z-index: -1;
      overflow: hidden;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      box-shadow:
       0 0 4px #a29bfe,
       0 0 8px #81ecec,
       0 0 12px #fd79a8,
       0 0 16px #a29bfe,
       0 0 20px #81ecec;
      animation: blink 2s infinite ease-in-out alternate;
    }

    @keyframes blink {
      0%, 100% { opacity: 0.1; }
      50% { opacity: 1; }
    }

    .container {
      width: 95%;
      max-width: 820px;
      padding: 40px;
      border-radius: 12px;
      background: rgba(18, 18, 18, 0.60);
      box-shadow: 0 0 16px rgba(255, 255, 255, 0.15);
      position: relative;
      text-align: center;
      z-index: 10;
    }

    h1 {
      color: #ff7675;
      margin-bottom: 20px;
    }

    .media-player {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 30px;
    }

    .media-player p {
      margin-bottom: 8px;
      color: #aaa;
      font-size: 1.2em;
    }

    .progress-container {
      width: 100%;
      max-width: 400px;
      height: 8px;
      background-color: #555;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px 0;
      position: relative;
    }

    .progress {
      height: 100%;
      background-color: #ff7675;
      width: 0%;
      border-radius: 5px;
    }

    .time {
      font-size: 0.9em;
      color: #ccc;
      margin-top: 4px;
    }

    input[type="password"] {
      padding: 10px;
      width: 160px;
      margin-bottom: 20px;
      border: none;
      border-radius: 6px;
      background-color: #2d2d2d;
      color: #fff;
      font-size: 16px;
      font-family: monospace;
      text-align: center;
    }

    button {
      padding: 16px 28px;
      background-color: #ff7675;
      border: none;
      border-radius: 8px;
      color: #000;
      font-size: 1.10em;
      cursor: pointer;
      transition: 0.3s ease;
      margin: 5px;
      font-family: monospace;
    }

    .navigasi {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .navigasi button:hover {
      background-color: #0984e3;
    }

    .layer {
      display: none;
      white-space: pre-wrap;
      word-wrap: break-word;
      animation: fadeIn 0.6s ease-in-out forwards;
      text-align: left;
    }

    .active {
      display: block;
    }

    .hidden {
      display: none;
    }

    .dashboard-text {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      margin: 0 auto 25px;
      max-width: 100%;
      padding: 0 10px;
      flex-direction: column;
    }

    .dashboard-text pre {
      font-size: 1.6em;
      line-height: 1.6;
      text-align: center;
      white-space: pre-warp;
    }

    .timestamper {
      font-size: 1em;
      color: #aaa;
      margin-top: 8px;
      text-align: right;
      font-style: italic;
    }

    .halaman-indikator {
      font-size: 0.95em;
      text-align: center;
      margin-top: 10px;
      color: #888;
      font-style: italic;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .pigeon-run {
      font-size: 3em;
      position: relative;
      display: block;
      animation: pigeonLoop 10s ease-in-out infinite, glowPulse 2.5s ease-in-out infinite;
      opacity: 0.9;
      filter: blur(0.1px) brightness(1.2);
      text-shadow:
      0 0 4px rgba(255, 255, 255, 0.3),
      0 0 8px rgba(255, 255, 255, 0.2),
      0 0 12px #ff7675,
      0 0 20px #ff7675;
    }

    @keyframes pigeonLoop {
      0% { left: 100px; opacity: 0; transform: scale(0.95); }
      15% { opacity: 0.4; transform: scale(1); }
      50% { left: 0px; opacity: 1; transform: scale(1.02); }
      85% { opacity: 0.4; transform: scale(1); }
      100% { left: -100px; opacity: 0; transform: scale(0.95); }
    }

    @keyframes glowPulse {
      0%   { text-shadow: 0 0 6px #ff7675; }
      50%  { text-shadow: 0 0 12px #ff7675, 0 0 24px #ff7675; }
      100% { text-shadow: 0 0 6px #ff7675; }
    }

    .fade-out {
      animation: fadeOut 2s ease forwards;
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    .notif-penutup {
      text-align: center;
      font-size: 1.1em;
      color: #ff7675;
      font-style: italic;
      margin-bottom: 25px;
      animation: fadeNotif 1.6s ease-in-out both;
    }

    .ily-text {
      display: block;
      margin-top: 5px;
      color: #ccc;
    }

    @keyframes fadeNotif {
      from { opacity: 0; transform: translateY(-5px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .fade-slow {
      animation: slowFadeOut 3s ease forwards;
    }

    @keyframes slowFadeOut {
      from { opacity: 1; transform: scale(1); }
      to   { opacity: 0; transform: scale(0.98); }
    }

    #counter {
      font-size: 1.4em;
      font-weight: bold;
      color: #ccc;
      margin-top: 15px;
    }

  .surat-terakhir-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    padding-top: 12px;
  }

  .surat-foto {
    width: 160px;
    height: auto;
    border-radius: 10px;
    object-fit: cover;
    box-shadow: 0 0 8px rgba(255,255,255,0.2);
    transition: transform 0.3s ease;
  }

  .surat-foto:hover {
    transform: scale(1.05);
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Memories - D</h1>

    <div class="media-player">
      <p>üéµ Cardigan - Taylor Swift</p>
      <div>
        <button onclick="playMusik()">‚ñ∂ Play</button>
        <button onclick="pauseMusik()">‚è∏ Pause</button>
      </div>
      <div class="progress-container" onclick="setProgress(event)">
        <div class="progress" id="progressBar"></div>
      </div>
      <div class="time" id="timeDisplay">0:00 / 0:00</div>
    </div>

    <audio id="audio" src="cardigan.mp3" preload="auto" loop></audio>

    <div id="loginSection">
      <p>Ketikkan sesuatu untuk membuka halaman.</p>
      <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
      <br>
      <button onclick="bukaSurat()">Masuk</button>
      <p id="errorMsg" style="color:#d63031; display:none;">Salah. Coba lagi.</p>
    </div>

    <div id="suratSection" class="hidden">
      <p id="counter"></p>

      <div class="layer active" id="dashboardSurat">
        <div class="dashboard-text">
          <div id="logoLoading" class="pigeon-run">üïäÔ∏è</div>
          <pre id="asciiNotifAnime" style="display:none; white-space:pre-wrap; text-align:center; font-size: 1.5;"></pre>
        </div>
        <div class="navigasi">
          <button id="btnBukaSurat" onclick="bukaSuratAsli()" disabled>üìñ Buka Surat</button>
          <button id="btnNanti" onclick="window.location.href='https://google.com'" disabled>‚ùå Nanti Saja</button>
        </div>
      </div>

      <div id="semuaHalaman"></div>
    </div>
  </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script>
  const passwordHash = "f09b133c45f78e374cd650c77229de1a5ea54dc4d2d3ca9bb1ddfe3c496f7939";
  const encryptedSurat = {
      halaman1: "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",
      halaman2: "U2FsdGVkX18Lie0u+zIEDT8bArmBpuSmTTEMywvQwMgGQgm5NQ6LT+7wzyDbhNmM1hj2Y8xUEIzAWMGXK2niGlNCX5Kk8CluKpQq4jwDNOMMXdnReVOMnz17LyYcAgf94KGe5AiWA3vsoW8M8V8L/q2+6CpiI8XmxLdyJNk8kR/aeA9+XPZYOGTgYhDmNhGTHdYTki10GPRtDzLYCPe6AZxE1xV46g8LaOw1bW3wDM0fZAXVpGhCslwqlWsZ5nps88RmDudC2FbUpTW9osrnoDd7Ejox/lt1tohhSc9wCMDyhh/t6Bi8Bk0emoqmvWZTkHhT2abbXG5w9JmgQv6F1IVEfbUp7edrQys95Lrq8IG6bkiZ6g8sAb5dN/ExOZvswYXjTCN0eUqwA3jR8jXuDz65d7LWCtd2YNYHPnxy4M/uBVLfBG23pA9QzN7yViknlnMzGAB1QsGBPNTQSd6I6DwiFzGzAnhi6tfYTwqgkBUx/v7EhfZpYUbBmbhIt7ukYdFvFLAzOsAhCJ6nNWJB1YRq9s83oC5fKBhGrt0ent+Aaw4mZaZPmDG05vqnm5QrwqeSq2i/51gM9pUnvuiVxycpqFIgo6xjkxYfcGs/mkp46Ftpa/yIw4qdH4EUviz4F8sElixnNBD7zEOOnL//b1tfm3nb2+iHbux6e4+Z/UZ1Mlo3aPDuO3HHk1nbk/T4zKT/VAqDqwnwesNEyx3nwFCBjCz5n5n/fCUBIf/dyRUJhl3U7tJU5ePhaUCiSEs08+2R9ncNemxFMz+GXJWTU57Voazza1/YP1odeN+9h5aRiK32IX1k/2YjZwPmxBNwi9EHjWJ/3PCxXW01hwEYaUXIb+wphu963yMFuYT3pJrDMqHeLj/jMFu3SzfHu7FAp5E8xZVWBp4kkP6aIKgGPVRJVSRbCCtDVOrYJjWlZWl2n04PTgHL+V30tAITZX2QKcSQnBcs1gCKviKVqfbEmHCQuPl2jkBDDsOBC66gYvvD6RX6bCBK4C21QA3gl01Gun2N0cjwAbLzLY1g/QNhJT/bV2e7Gn0G7Mkj9LN89EteOv9wD6UJd7uoom8DmKkEAYYIoW3j3IagixvqrSYEWkkycK51C90ZbUcYb2pMJDToWe8YAeLv3RUfeB/SatXAWDCemhIYq0h2M9dgL5hMPc0RyN5zlqZyoHCjNXI6Uw8UFuHLFu6MhoEIeZ9RGjgsdAPLAWubgd9QxBmdrtjpHz5Rt2sVSzbsbocvdLd+DWK2V0x3tsnmE4Ujo0FKMFRZ0xIWu7gf/tk+wUfZGdAnA5vSXoVd/h74CQnFRNCykMA/Ya7Z2TyaPsJN/EY1NZS/Thkt9DjSPP9EyIuWScw+myWJ56uHMYaiLgtg8fbRLpYRsuBgcw3l3AN3jDZCFVkzRenRzxwgzG22crCGmiTnqM/7QGeuqhXPmUxI/KlBphvkiaT2m1HIPweUybp/TLZMKEV9stdVAqAicF09cMuvEwNk7yfQw4gtetN47gg/HQzfLW4ftkaA9qSj3uVh0nWg2/zPPdspk+c3CLWhfVUbGr7v9HiQQw1CJBNaTMGI+1CRaN8pJtHmPHJAZ4Uz4fh97EUhmFlwZhHBrVe+fZljB4QUQAuQLvdxiceqUY8PPAF4ICNFmgVlNeK5u5/EiwD6xi7RXK14n95Ix/jp3X4+lP/SDZbSzGSKPduhMKoSzQI=",
      halaman3: "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",
      halaman4: "U2FsdGVkX1+5PQji9PA5PlA7rQlCpu84b8SPT0oqSFWFRXXfDn/XPSJoV6vIKqkxRsk13Q77jumvKKplvbTnpEJYOEwL+3IS+5OoZ83Yhkh2fVoCoywEhnZxqReeadjZJm8gerbeJBc/xghV2TwXy6zlUwLnZYRoaZG7V7ehJXbK97pq2ZnlhK7zTjcOIneN02r7fHWW765PBgdWwh0ge3FAg3sHPKsJMCu75km+MdS1DScg0DAVRHDc1jzOwpIQJ0TXB7jfydr7a9KxU+bLmlmuc6eSyUss4bxy+pEnSWwXTylpAsV6U0Qy12RrKCjoOmEMMY1L5kWr4hwMu08WPLsQiPIU+f0ryu/miYnuKm29vkas7dJQ50b8TDIOgXrSgG9gfVS84txgMu0hQh+pR2OhRa0w6Md6iFywCxwKzg5LQethBTUs0ojwGx4q3mahdDujf3+LyKVsYGiuI1/irc61P1Khx2PBDIMrnd5GBbQCncS1mV3BJHtEiQAhZ6EJxHFC8c/ccE4WZ+sts3gs2jlbnN5+z5h3cExZjbkKViwK1HSAFRg8qti0W8Jh43btpuuoTeOODsehMlI+omBOGMIUn+Q7ekXKo0AKhtRmWntQ6Kmcu+M+Awn0TpOQHKLwDjj+XSloWXCchvxrcPzlzajClkbXgH4Az7oWlzWudFPG9ncVuzQrau6AuJXuV2Zod/uQXRL7T7rf3cOD7Nc2cLYrdTapJ/dxw91wTMySW9Gaq0ZijxaIVwdiFTTkVEGoOL714kZQ+1OlDSKBISWfes1DKUZrpgTZVgCfGcQGiWitC3tgkpObL6P92p8JvrYlMrqhC5uBNxBpw7U2LcHBj9UZkrJeWz7nzOjs9ZY1kMPCsdf9gB+x9+5F6mkSovaYXtZtUEpwEFHtVV8izKY3eSXWPwfCNN7RRb8DyjhQz1gzHWV0fYzL02Xp84FQlTz+BkLpo5n+REFJEUl98yhMPbVRUixRDCPbxvM027Q7D/BrKHKxf/H3a0N5nIns9jyT1o7tR+CTj8DiSmlvgbR0ZToru45M4YWVhVc6Dqtt/vBYgvqHjzbIl66p9iY9cRM7JS4V6XsOrV3gvcXgRg9oJCDQ/Ena9AN2V8m8374y2JddySF0tDqT7zz0e79hWwGv1wQuCr5K8XU1pYenWhItWRc7TQPCXnGTSi7Y5fTzBArL/prQq5EnEiF3kKaR+bffkHOkbSN0J6g8zRd7cqAWtQLSLwtrgdwZfk9IlmaAcOz+E+ZyoLb6oGQhuLBaLYRjMT/+yfpDfWgEnRZ0bGJ0esKAjtg/kim61rNKNXVnoxMfSFqoYm19bNKoNCfoynvmlrThjbvRqLNIjp4TYqp1sHkv0GWHX+beJVjfBNaRBERiRyfdfyNaLg+EuPJVZkM9cj4A71OwxtiC+AtYnPPslKjypHmafNDuNxWE+cA50JYbwSG9dHw2bPsnH5kBaat9iK4HoFtPMXr81dTjsw9YIss8rS2SfHwdEXMFaiWZOfORGCMmPTV8ZPoJ4EpNuSy7",
      halaman5: "U2FsdGVkX19ZmB3Lr7FzgBvIMdrKxXhSEknmy3UQ0/1J1K4yJYAIU1NezdN9VVndPenyespmOcLqqvqLmnEknZrikcp04kSF45NxqXziqxUg5/J9cicizzx3zjOVNBQhGYpeoMGM/D98XshPcI40lkt+lBCuWY+xecU/c9r+ECN5mbCbz/2qB3caXk4dfaTDbYUA5fqEVrGvtDegPuRvHKQ1xdNa0Vj88UFzK7lEFw97Qe9Hx+iGdwfDxCjuE0H9AlMpakVWeL1Q7pkE0G8z08NyR+adr9MAvo2M1NL+t54rRgaulawFdpGjdr0IVXBVb5ToWlm64tYvxCXi8nuDm5buzAMyGuQhZAwufUefHWCJzIigqCbKGQNLzEtFJuw83BANY0iGhJJNOFKyLHoMyBnD+N+Wcj/c2ifSsPv5MxjiUw5U7xVsLs+VQfyMU6G7yW53jBFcCeqwbCP6nvmymaKY2Qe6tVsYkw4YPiMBlh2mtNTzZrKC9uzshSIRS2p9PLgQqW8urdKQbFMK2UpaNUwYVnrOG9KOuz3Fb18QvnjEUWew8ON2icptOmvig+lyNm/ZHIOmNpQEpaaIRauZtKJW1sfgAJUTUGiOIqVWHnwVAT15zLOGNIpHQ5fbwxPEV5z+eN+x5y9vKJgjJ1piJHqxUDkyeE4Q88Bl3h1gBG1+lhk79NU4DoP7SY0lliqaB1oWOKkBkUi7BneJDTgyOke5mAJO9CCY92C/M6MYIwR6n+qmiy/iQrZg/9vxhGi43gx0zLp9MxJ5T4ca3QKxrUmGPZUo1uafskjB00nbRAucUXtBYhM8m4vSEJZJcNZju6MGrJvlvPAXBoTVOcclombhR+/SOiMAHTAwkMOK/WDgPQsqCKE7WPhMOVIwKojTTFB5MFSmerKFK5JgRNpPtVnVkrRCnLsZJ0WJ6+maBlXLgaDk9tkrRsbwShqLxWQ6BfENLiK/903I1f8Tv3yQleAqkxlSuTS+bYwfDHzBJwfsg3cHInDxHdwoQauRayFX+UyzKpXwrYmT/tjoOCxGgNph1szFbB4Skt6Pt0jen4mN9cjs70kD2WtpjeBM4qWnZKfKUPD9Ug8IvX9MYzS1VC/74mSDBJfvv6eGYsvb7rXzddgIxREoZK06gPa4WGcRGcxLD1iwP/U10qowDkcv+SfwxzBlyuW8zSz5UAgmDji1RLeWWOTpQIRDxvN1f6pTRbtnlbUb4WxZ/P/smJg0VEJaJTKJule8UtmiRPLHXM4uhBfLII34MTXXWx3ZShfalQ7I6u2mUi3rDauDBemmX5iCXPgsHv6eypenpLxgCVsuEA8oxgAzAVtZ8GsSHKfC2Ktic+XscCy6vB8osyANzJQz8UaF+mnR8WEU0msit8eFejX2QNFu/N5YEEA9+dgfWF2hoUMptcPNN616eZkZW1YCoQwXZRLPpyLyDWDTjMbQ65mTPtCkhs+E1UtzFmziS9X1ypdu1F1z3Xzvv6Yut4YTTdJSckTJ867Xn4dtm8MxFS1Q+nxCI7bkwO2XcR4I2K7xT785tRHc/fUai4gs+RpcjA3hWDDVIlKP1stiOq9z/KwNkpyxNEZrCLZT6Ne1eZdHcqkd/44zuKUlqwYD6dpAsQ4fl8doXbQM5z8wS5GVjdscJsYi1ZjS+DnijuGZ",
      halaman6: "U2FsdGVkX18zgaX7OIH5CdArmzU1/HQu+hyHKLzpNpRgoQNEdZYhJLjN4Cvof2bR0iTvG76wx1YH1thzRj5ZCaQyU337KNHbOBjIC5T070Sv9vq4GjANT10Mx4fH6t0Uxv2QUMAlb5CBaE4D48ZELRKB50bSU6YZ8o2zvaHcqqIetrqN/f5aBsx+bRnuK2dzxn7KeBTKl8KkBw/PIDsSfGaoqJVZTZThz8rng7/hmYi9gbRTq0MmKDL68julxnRPksR3yLgmSZSCXbw2+8eJBE/2gV16evAF/5S/DO1EjPn6Gm5jxFHHpJjnxUNt+YBU6fki24tGnxGjhVjiIkMZD5dWsgw7Na07q7qGSbsg7/tip9fqmIN9rnovP+GyNGuDoPRcmMHhvG8xk1RRL84Ei72wIn+KmhFARqPnWr5kwz8pYd96W9fPy1vebPhhwTb8SZEk9K3h/YjNsMHc5fiBV0Cu9CHhKQ8Az+CLA3XnhKD8XXkQ4KAwsHzKAOVaBjoJNnRTlg/9JmNNYld9dnTZY6hIJnWEvA0RP7qw+4W90JDsVi8CscUnfnR9hpde7MTHttEiBW+0ZyNdVVIAd7qcNl7InC8BuFMdeHNxzaStOx0Qlt8nXMCousvCveJfjYnXkD9bt2LvG6+O5ncUJXnX2W2GwmtB2fNZeFGLPeS52G5krPvLo0g1E+2kccuPATgVpzK/Xyv4qHUu7NxD+kKs+Wm9OTh2rUfmSyQuUA+HET27VVdfqsbbi8DUmgozPs6QiyMnI9wISwankFAHV2VsnUuC64remYP5hj7RMe+e/fYrT44iU7HC7m/BENBKtS49K+dIUQkb3IBQ5Un6tfxTFL0ntWdQmkD4oDP4Ln3YlNp2f9uhDdhBLkryUKnN4g3NFPirCvBVKuyM2qiLzSYPrC2EW05LnLWLMoA1sWFKM8iBxBUXPuwjnuQunTAN+xFfGNMKYY6VdH9UPJk2/l3Ys1tiBq1RUmEuhMXy2Wq/zXTE7DunYZ28o9OXxpjuulMqgl3F0YCPBk4BJmHLMsS4Sucw9me4nWrp32VVztuFUpALQ1w++JdNisQ0yBAT86TUTyusvIbhOQ1b4Z3qAruwZikB1r6n5OFhNZDVJzQKpP+U3kngbnHfqMJLO6YGIbxmAIT2NuksV28+bvbUVl8LFsYbEMLsbAj6W9AcwIbwsY0Mmto1ycAABhgYv8FvsTf/mRhiwuPGp60H4pXdNckhDMHi72lVR+kA58Bja0IDM5rfhtdmcKcd+x4LxW4qPdFyzl3txB1v31FWCCJeRYRi2d0RLW/Zy9Ll1eq8TVpK8RR0Efm3PAxjJ3f1oVpgH0fjUVrOFATuyvvppmrT4xNN+S2RPj29CWO3qO+mC4Ah2bFX4eDmbRTc4iSmmG0B2MMN4nCwFGp1VNAf7UIICIIBysZAoxvDT6pItgCw9Q2JswGnpakFb7R9C0nFgQ0OWRWClXZai3uf9FfDwDVsuvYFislD6UirDStqoGqf6x6RBzGbFYoHtW8CqroTlYsbsRAL6eiIG+vVvH6iH+X345ywQvOEHnx49jGV/A5qfEQ4titgeSlStVQ+1l3gcLNnUdkwzMIz1e1D83CYTdUTvcekAo5QVUTGsLvnMt3WKKdLXw8+QTtFd5b4Z12mBHHUPpYFZHCukAZZhlBmRTDDV/qIc/66zaSBx6uzmo7UNSoTcz9Pa7OhByqgTw/r9QQpxZGUgZWVkGTyBJQXeLit3yhx3jCIeBEYu6G8ZSoTHhivHKkb/RmU7kBf4OSiCvCLG9dkLp7pjResAMT7FOZf7vu6yi44uhzlsiTf+/y1o/xfVgQ=",
      halaman7: "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",
      halaman8: "U2FsdGVkX18yo6X6jc6RlePplOt/mZJfT19F5q234eJgG3LGIrmm1qWj6r1P0jxhcYbPNafLghnLdYWcMwQmJGTueZ19G5XeYfXC8DSL10B2HdNIrpTyHoORbPorbn2fOz3gOtiqjOPuS53m6c1Yz5dMhJqjHidpka4c/4vqMOtS2BkA8Kiw0OkLqy0Ya1/OHlEUWKE365rkW4D0+NriEMpWum3AxMEtVGjZzxIzNQMtJ4kDqHsdPw+cgrB/6z+Fj9fibPGFFW11V/D+e07GeZ5yEZVS2yu0thRV/ErLiw0laUU1rmcbIZzZv+g/AJ3NuX7gBBUoEGHkH7yhUbHASmx2llldkjlvWg6Dpwt9NhDiRrGlQYNgB01mVN/jIt+TE64T3kMy4lTi2rHEgsWaKBhyUIyWCUWpMNGmxHt/j/oGajLmC4Ao+4U/3PnC4gy5jgQsOSrD6e0O9eur8WUtskNNrJfgw4EENnrtFZfTqpf5Mb/ZXBUh79SG3FtakMNpJdpGfpiQeBMnxdNhImU7pgzZw6zlojdqZCuI/UWeqKlQYkXFCz6jIGd12+7AY75qyLXTse0P9yPElEh4ovRlU1ftSYyc6FC5qzkVH9bLNoh2TJMshBCzSOkyP2cSW1EP3bEebJ6J021J91hJ1LXjPZyt+yJoljnTpMM2JOH+NN5wxVBrZR95+3cGZwBUO6XxDPllhmUjkfpvx48EOksKt/1BrFqZ9gsiNXlgWhm5k+ym/svjWby04NgX4oW4A5CIitKeDSA7mt+3S1dgWZCOuUpyDY4rs6cKm/kzmy9Qs5Iv+cS9MnLqVu1bnEFZOGDq3xDSpJ+wEDWrtjw48KguZ6JVVXW2ozJDqxsjedZwDslgbRC0emdSkjsJqZTbfBN9aMwgfX6XttinGbn//VvGQbjQIAkM8B++1hi9902HD6w+cCI1U3IwCJVBbzi2D0ognDBNhJhCKaYf0dCPm2YUM5NqwzCGdF2srhULqrqc/fZVnE83kxAyeezRcQYXB+ZDBQLqPhAMeVcGj70BmuLNoUaOZYGtSNO1G0Fm/IB7RmByp1FojVtSOSmajuS3Vmqj54xq7GJeULkuggsU+idaMY+cqABFTt6GE/m2pVazd+MBPv+KS/o/FaLsyq2NboCy4VWf5YD87r5SAGemkyDWnrUgI+hBjb1SHi53zPHDjfgUgDaaLtKHjNhMLRZxY2GR09kRZBqVM9a1zWBAYZ2dyvOswpyzqu88SyYqH+TpUAxCxdG/LcwQwO7CpSrglw+KV4jT0ZBDrRKnJLTAFbvBBFrR4EFoxziball6Xrp7+q5Il9ZAZjuA8GmkxqlfxbPEipWQ7/9aHIc81+RFRHI1cTfDQ9ydJ4ziDS8y8ibVpJm1g0G6ZDntbjqr7TXlg+YFKc1cvriTESotvvDEzWRkN3VwoSRsUvuFK27kPVFARif5W8DgQYtlq0TFfK+8y0KPe88UooKHnJJsgBjPfJQ+ObboHuNRMAA/b1o12qhnSEBT4mh/cNG2i+ztbwvCYyk6orqMuMRYXWoKT/dRLLmab5kw8RxOnijXvEjZY9DbXTnuWl/AMU/nKM/i8pJrzfUXGiBCjMAqcRhubckB61eJBEuZhwaW6qzCjlEhIKrelmlCAIBv2jEcA/KiQjKN4M7Mz528eeoT8kVRmQhFiw750G0Du9tkmPeV7EchgI4FOPBJ4aaiu939OPQSgqy1DDCl",
      suratTerakhir: "U2FsdGVkX18kScDn3Q/XZxlN/bY2U8aSQQMakJxdoIgak05Ecknjubfw32RENGXLYgkIvws/ct07apmhsPzjYJwdaNakQIeYDuNFngTUWr15R6NemjBagOw2Bbe+tUA63/E5mKM8repofTsBeXd0UbE0QXg4bprGIDnfSszmOi/bdS03G1eAjaazDN8kRYd0dKBFtenYPp6PWI7jmlU0fdHXlxlQ+F/Y0ZFDw1h4/ZqrT6IziMf8egdQPTXsSHk95n0qitNvsM85C4fjQPkX4hP1vw9gtczzVjf1bJqc3bCQZ8nMxuhe0FSeJyZGrzNS/ea77Lw8xKfzE1sEpe9+PycbtdZ+P4eBn8f1KspDCYpp4Y1lU1e+5sDuRStBVbWbiB2Jetv7mdnVc5elapKaW8RASBHoW4bo4na8Bu2WJlLEtLMFkBBDmOlSU5RVDDo1nszon6LHFoD0AkHWPGRRJw==",
  };

  function playMusik() {
    const audio = document.getElementById("audio");
    audio.play().catch(() => {});
  }

  function pauseMusik() {
    const audio = document.getElementById("audio");
    audio.pause();
  }

  document.getElementById("audio").addEventListener("timeupdate", updateProgress);
  document.getElementById("audio").addEventListener("loadedmetadata", updateProgress);

  function updateProgress() {
    const audio = document.getElementById("audio");
    const progress = document.getElementById("progressBar");
    const timeDisplay = document.getElementById("timeDisplay");
    const current = audio.currentTime;
    const duration = audio.duration;
    const percent = (current / duration) * 100;
    progress.style.width = percent + "%";

    const format = (t) => {
      const m = Math.floor(t / 60);
      const s = Math.floor(t % 60);
      return `${m}:${s < 10 ? "0" + s : s}`;
    };
    timeDisplay.textContent = `${format(current)} / ${format(duration)}`;
  }

  function setProgress(e) {
    const audio = document.getElementById("audio");
    const rect = e.currentTarget.getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    const width = rect.width;
    const percent = clickX / width;
    audio.currentTime = audio.duration * percent;
  }

  let passwordYangBenar = "";

  async function bukaSurat() {
    const pass = document.getElementById("password").value;
    const encoder = new TextEncoder();
    const data = encoder.encode(pass);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join("");

    if (hashHex === passwordHash) {
      passwordYangBenar = pass;
      document.getElementById("loginSection").classList.add("hidden");
      document.getElementById("suratSection").classList.remove("hidden");
      playMusik();
      hitungHari();
      gantiHalaman("dashboardSurat");

      setTimeout(() => {
        showAsciiAnime();
        document.getElementById("btnBukaSurat").disabled = false;
        document.getElementById("btnNanti").disabled = false;
      }, 3000);

      renderHalaman(pass);
    } else {
      document.getElementById("errorMsg").style.display = "block";
    }
  }

  function showAsciiAnime() {
    const notif = document.getElementById("asciiNotifAnime");
    const asciiText = `
üìú Haii orang yang selalu aku tunggu
(Di baco sampe abis yo hehe surat yang aku buat)

"Kalau kamu bisa baca ini,
berarti kamu berhasil membuka
surat terakhir dari orang yang belum pernah ninggalin kamu..."

üñ§ Surat ini diem-diem dijaga sejak hari pertama...
    dan cuma buat kamu.
    `;

    notif.style.display = "block";
    notif.textContent = "";
    let i = 0;
    function typingAnime() {
      if (i < asciiText.length) {
        notif.textContent += asciiText.charAt(i);
        i++;
        setTimeout(typingAnime, 45);
      }
    }
    typingAnime();
  }

  function gantiHalaman(n) {
    const layers = document.querySelectorAll(".layer");
    layers.forEach(el => el.classList.remove("active"));
    const target = typeof n === 'string' ? document.getElementById(n) : document.getElementById("halaman" + n);
    if (target) target.classList.add("active");
  }

  function bukaSuratAsli() {
    gantiHalaman(1);
  }

  function hitungHari() {
    const awal = new Date("2025-06-24T00:30:00");
    const sekarang = new Date();
    const selisih = Math.floor((sekarang - awal) / (1000 * 60 * 60 * 24));
    document.getElementById("counter").textContent = `üìÖ Surat ini sudah disimpan selama ${selisih} hari.`;
  }
</script>
<script>
function renderHalaman(kunci) {
  const container = document.getElementById("semuaHalaman");
  for (let i = 1; i <= 20; i++) {
    const key = "halaman" + i;
    if (!encryptedSurat[key]) continue;

    const div = document.createElement("div");
    div.classList.add("layer");
    div.id = key;

    const decrypted = CryptoJS.AES.decrypt(encryptedSurat[key], kunci).toString(CryptoJS.enc.Utf8);
    const p = document.createElement("p");
    p.textContent = decrypted;

    const timestamp = document.createElement("div");
    timestamp.className = "timestamper";
    const today = new Date().toLocaleString("id-ID");
    timestamp.textContent = `üìÖ Dibuka pada ${today}`;

    const indikator = document.createElement("div");
    indikator.className = "halaman-indikator";
    indikator.textContent = `üìñ Halaman ${i}`;

    const nav = document.createElement("div");
    nav.className = "navigasi";

    if (i > 1) {
      const back = document.createElement("button");
      back.textContent = "‚¨Ö Kembali";
      back.onclick = () => gantiHalaman(i - 1);
      nav.appendChild(back);
    }

    if (i < 20 && encryptedSurat["halaman" + (i + 1)]) {
      const next = document.createElement("button");
      next.textContent = "Lanjut ‚û°";
      next.onclick = () => gantiHalaman(i + 1);
      nav.appendChild(next);
    } else if (i === 20 || !encryptedSurat["halaman" + (i + 1)]) {
      const toLast = document.createElement("button");
      toLast.textContent = "üìú Surat Terakhir";
      toLast.onclick = () => bukaSuratTerakhir(kunci); // ‚Üê ini ganti jadi call fungsi, bukan open tab
      nav.appendChild(toLast);
    }

    div.appendChild(p);
    div.appendChild(timestamp);
    div.appendChild(indikator);
    div.appendChild(nav);
    container.appendChild(div);
  }
}
function bukaSuratTerakhir(kunci) {
  const container = document.getElementById("semuaHalaman");

  const semuaLayer = container.querySelectorAll(".layer");
  semuaLayer.forEach(el => el.classList.remove("active"));

  const existing = document.getElementById("suratTerakhirLayer");
  if (existing) existing.remove();

  const div = document.createElement("div");
  div.classList.add("layer", "active");
  div.id = "suratTerakhirLayer";

  const decrypted = CryptoJS.AES.decrypt(encryptedSurat.suratTerakhir, kunci).toString(CryptoJS.enc.Utf8);
  const p = document.createElement("p");
  p.textContent = decrypted;

  const timestamp = document.createElement("div");
  timestamp.className = "timestamper";
  timestamp.textContent = `üìÖ Dibuka pada ${new Date().toLocaleString("id-ID")}`;

  const notif = document.createElement("div");
  notif.className = "notif-penutup";
  notif.innerHTML = `üì© Surat telah dibaca sampai akhir.<br><span class="ily-text">Terima kasih. ily</span>`;

  // Tambah galeri container
  const galeri = document.createElement("div");
  galeri.id = "suratFotoGallery";
  galeri.className = "surat-terakhir-grid";
  galeri.style.marginTop = "20px";

  const nav = document.createElement("div");
  nav.className = "navigasi";
  const kembaliBtn = document.createElement("button");
  kembaliBtn.textContent = "üè† Kembali ke Dashboard";
  kembaliBtn.onclick = () => {
    const dashboard = document.getElementById("dashboardSurat");
    dashboard.classList.add("fade-slow");
    setTimeout(() => {
      gantiHalaman("dashboardSurat");
      dashboard.classList.remove("fade-slow");
    }, 750);
  };
  nav.appendChild(kembaliBtn);

  div.appendChild(notif);
  div.appendChild(p);
  div.appendChild(timestamp);
  div.appendChild(galeri); // Inject gallery div
  div.appendChild(nav);
  container.appendChild(div);

  // Panggil renderFotoSurat terakhir
  try {
    renderFotoSurat();
  } catch (err) {
    console.warn("Gagal load galeri:", err);
  }
}, 150ms};

function renderFotoSurat() {
  fetch("foto.json")
    .then(res => res.json())
    .then(fotoList => {
      const gallery = document.getElementById("suratFotoGallery");
      if (!gallery) return;

      fotoList.forEach(src => {
        const img = document.createElement("img");
        img.src = src;
        img.alt = "Foto";
        img.className = "surat-foto";
        gallery.appendChild(img);
      });
    })
    .catch(err => {
      console.error("Gagal load foto.json:", err);
    });
}
</script>

<style>
  .stars {
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: 0;
    background: transparent;
    overflow: hidden;
    top: 0;
    left: 0;
  }

  .star {
    position: absolute;
    background: white;
    border-radius: 50%;
    width: 2px;
    height: 2px;
    animation: blink 2s infinite ease-in-out alternate;
  }

  @keyframes blink {
    0% { opacity: 0.2; }
    100% { opacity: 1; }
  }
</style>

<script>
  function createShootingStar() {
    const star = document.createElement("div");
    star.className = "shooting-star";

    star.style.top = Math.random() * window.innerHeight * 0.4 + "px";
    star.style.left = Math.random() * window.innerWidth * 0.2 + "px";

    document.body.appendChild(star);

  setTimeout(() => {
    star.remove();
  }, 1800);
}

setInterval(() => {
  if (Math.random() < 0.4) {
    createShootingStar();
  }
}, 4500);

  function createStars(jumlah = 120) {
    const starsContainer = document.createElement("div");
    starsContainer.className = "stars";

    for (let i = 0; i < jumlah; i++) {
      const star = document.createElement("div");
      star.className = "star";
      star.style.top = `${Math.random() * 100}%`;
      star.style.left = `${Math.random() * 100}%`;
      star.style.animationDelay = `${Math.random() * 2}s`;
      starsContainer.appendChild(star);
    }

    document.body.appendChild(starsContainer);
  }

  window.onload = () => {
    createStars();
  };
</script>
</body>
</html>

